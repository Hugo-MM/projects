{% extends 'base.html' %}

{% block title %}
  <title>MovieHunter - Welcome</title>
{% endblock %}

{% block content %}

{% load static %}

{% if not user.is_authenticated %}

<div class="container">
    <div class="row top-buffer">
      <div class=col>
        <h3>What is this website ?</h3>
        <p>Movie Hunter is a recommendation engine which generates a tailored list of movies to watch according to your personnal tastes.</p>
        <p>Create your account or log in if you already have one, rate movies thanks to the 'search' or the 'random movies list' links in the navigation bar and then, hit the 'get recommendations' link to discover yout customed recommendations. These recommendations are generated by our Machine Learning engine among the 85,855 movies parsed in our database.</p>
      </div>
    </div>

{% else %}
<table class="table table-responsive">
  <tr>
    <h3> Hello dear {{user.username}}
  </tr>

  <tr>
  {% if user_movie_rates %}
    <p>As a reminder, here is the list of the movies you have already rated.
      <th> <p>Movie title</th>
      <th> <p>year</th>
      <th> <p>genre</th>
      <th> <p>your rate</th>
      {% for rate in user_movie_rates %}
  <tr>
          <td><p><a href="{%url 'MovieReco:MovieView' rate.movie.id %}">{{rate.movie.title}}
          <td><p> {{rate.movie.year}}
          <td>  {% for genre in rate.movie.genre.all %}
                  {{ genre.name}}
                {% endfor %}
          <td><p>{{ rate.rate}}/5</td>
      {% endfor %}
  {% else %}
   <p> What a shame : you haven't rated any movie so far, describing how much you like a movie or not is necessary to obtain customed recommendations. Please feel free to navigate through the links in the navigation bar just above to explore our database and rate movies.
  {% endif %}

  </table>

{% endif %}

{% endblock %}